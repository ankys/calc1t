
\chapter{集合と論理}

\section{集合、命題、写像}

\emph{集合}とはいくつかの「もの」の集まりであり、その集合に所属するかしないか判定できるものをいう（ことにする）。
ここでいう集合に所属する「もの」のことを\emph{元}または\emph{要素}という。
「もの」としては整数や実数のような「数」を想定しているが、関数や図形さらには集合自体まで「もの」として認めることがある。
つまり、集合の集合などもあり得て、実際後に述べる実数の実体は特殊な集合でありその集合が実数の集合としてこのテキストで頻繁に出てくる（が、集合としての実数は最初に基礎的な性質を示す時のみに使われてあとは集合であることを意識せずに数として扱うことができる）。
集合$A$と「もの」$a$に対して$a$が$A$の元であるとき、$a$は$A$に\emph{属する}や含まれるあるいは入っているなどと表現し、$a \in A$と表す。
そうでない時は、$a \notin A$と書く。

集合を記述する方法にはいくつかありこのテキストでは四種類使う。
そのうち一つが外延記法といって元を列挙して記述する方法であり、例えば$1, 2, 3$からなる集合は
$$
\lrset{ 1, 2, 3 }
$$
と書かれる。
なお、この集合に対しては$1 \in \lrset{ 1, 2, 3 }$で、$5 \notin \lrset{ 1, 2, 3 }$である。
集合で重要なことは元が属するかどうかであり、属する順番は関係がない。
また、上記の記法で重複したものがあっても重複分は無視される。
つまり、
$$
\lrset{ 1, 2, 3 } = \lrset{ 3, 2, 1 } = \lrset{ 1, 1, 2, 2, 3, 3 }
$$
である。

このテキストでは元の列挙の際に誤解の余地がない場合にいくつかの元を省略する。
その際には記号$\cdots$を用いる。
例えば、
$$
\lrset{ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 } = \lrset{ 0, 1, 2, 3, \cdots, 9 }
$$
や、$N$を自然数として
$$
\lrset{ 0, 1, 2, 3, \cdots, N }
$$
などである。

この省略に関係して、集合の二つ目の記法があり、列挙が無限に続く場合にも省略を用いた外延記法を認める。
これにより自然数全体の集合は
$$
\lrset{ 0, 1, 2, 3, \cdots }
$$
と表される。
さらにこのテキストでは前方にも省略を使うことを認めて、整数全体の集合を
$$
\lrset{ \cdots, -3, -2, -1, 0, 1, 2, 3, \cdots }
$$
や偶数全体の集合を
$$
\lrset{ \cdots, -6, -4, -2, 0, 2, 4, 6, \cdots }
$$
などと記述する。

上記二つの外延記法を使っている場合に限り、例えば「任意の$n \in \lrset{ 0, 1, 2, 3, \cdots, N }$に対して」という記述を「任意の$n = 0, 1, 2, 3, \cdots, N$に対して」などと書くことがある。

三つ目の記法に関連する概念が命題である。
\emph{命題}とは真か偽か判定可能な条件を記述した文字列である。
例えば$1 \in \lrset{ 1, 2, 3 }$は真の命題で、$5 \in \lrset{ 1, 2, 3 }$は偽の命題である。
命題はしばしば$P$や$Q$の文字が割り当てられ、命題中に変数$x$や$y$がある場合は$P(x)$や$Q(x, y)$などと書かれる。
集合$X$が与えられてその元$x \in X$のうち命題$P(x)$が真になるようなものを集めて得られる集合を
$$
\lrset{ x \in X \mid P(x) }
$$
と記述する。
命題については次の節で詳しく述べる。

四つ目の集合の記法を説明するために写像の概念を導入する。
集合$X$から集合$Y$への\emph{写像}とは$X$の各元$x$に対して$Y$のただ一つの元$y$を対応させる規則である。
この時の集合$X$を写像の定義域、集合$Y$を写像の値域といい、値域$Y$が数の集合のとき写像は特に関数と呼ばれる。
写像を
$$
F: X \to Y
$$
や$x$を$y$に対応させていることを明示する際は
$$
F: x \in X \mapsto y \in Y
$$
のように記述する。
また、$x$に対して対応する$y$のことを$F(x)$と書き、写像$F$のことを$y = F(x)$などと書くこともある。

四つ目の集合の記法はこの写像$F$を使ったものであり、$X$の各元$x$を集合$Y$の元$F(x)$に対応させ集めた集合を
$$
\lrset{ F(x) \mid x \in X}
$$
と書く。
三つ目と四つ目の記法を同時に用いて
$$
\lrset{ F(x) \mid x \in X, P(x) }
$$
と記述することもある。

三つ目と四つ目の記法を合わせて内包記法という。
この内包記法を用いることで様々な集合を記述することができる。

元を一つも持たない集合を\emph{空集合}といい$\emptyset$で表す。
元の個数が有限個の集合を\emph{有限集合}といい、有限集合でない集合は\emph{無限集合}と呼ぶ。

\section{命題と論理}

命題から次のようにして新しい命題を作る。

\begin{definition}[命題の演算]
命題$P$, $Q$に対して以下を定める。
\begin{itemize}
\item
$P$, $Q$の両方が真のときのみ真とする命題を「$P$\emph{かつ}$Q$」といい$P \land Q$と表す。
\item
$P$, $Q$の両方または片方が真のときのみ真とする命題を「$P$\emph{または}$Q$」といい$P \lor Q$と表す。
\item
$P$が真のとき偽、偽のとき真とする命題を「$P$\emph{でない}」といい$\lnot P$と表す。
\item
$Q$が真または$P$が偽のときのみ真とする命題を「$P$\emph{ならば}$Q$」といい$P \implies Q$と表す。
\end{itemize}
\end{definition}

このうち「$P$ならば$Q$」の定義で$P$が偽のときならばの命題は真としていることは不自然に思えるかもしれない。
例えば極端な例では「円周率が$3$ならば$1 = 0$」という命題は真ということになる。
命題$1 = 0$は偽なのでおかしく感じるかもしれないが、以降の数学の議論を行う上ではこのようにした方が都合がよい。
論理と言語の間にはすこし隙間があると考えるとよいかもしれない。

これらの命題の演算を表にまとめると以下になる。

\begin{table}[h]
\caption{命題の演算}
% \label{f_benford_law}
\centering
\begin{tabular}{ccccccc}
\hline
$P$ & $Q$ & $P \land Q$ & $P \lor Q$ & $\lnot P$ & $\lnot Q$ & $P \implies Q$ \\
\hline
真 & 真 & 真 & 真 & 偽 & 偽 & 真 \\
真 & 偽 & 偽 & 真 & 偽 & 真 & 偽 \\
偽 & 真 & 偽 & 真 & 真 & 偽 & 真 \\
偽 & 偽 & 偽 & 偽 & 真 & 真 & 真 \\
\hline
\end{tabular}
\end{table}

命題$P$と$Q$の真偽が一致するとき「$P$と$Q$は\emph{同値}」といい$P \iff Q$あるいは$P = Q$と表す。

前節でも述べたように命題中に変数$x$や$y$がある場合は$P(x)$や$Q(x, y)$などと書かれる。
この変数付き命題から以下の新しい命題を作る。

\begin{definition}[全称と存在]
$X$を集合として各元$x \in X$に対して命題$P(x)$が与えられるとする。
\begin{itemize}
\item
すべての$x \in X$に対して命題$P(x)$が真であるときのみ真である命題を「\emph{任意}の$x \in X$に対して$P(x)$」といい$\forall x \in X, P(x)$と表す。
\item
命題$P(x)$が真である$x \in X$が一つでもあるときのみ真である命題を「ある$x \in X$が\emph{存在}して$P(x)$」といい$\exists x \in X, P(x)$と表す。
\end{itemize}
\end{definition}

\begin{remark}
$X$が空集合のとき、命題「任意の$x \in X$に対して$P(x)$」は真とする。
\end{remark}

命題の演算の性質として以下が挙げられる。
\begin{enumerate}
\item
（結合法則）任意の命題$P$, $Q$, $R$に対して、$(P \land Q) \land R = P \land (Q \land R)$, $(P \lor Q) \lor R = P \lor (Q \lor R)$。
\item
（交換法則）任意の命題$P$, $Q$に対して、$P \land Q = Q \land P$, $P \lor Q = Q \lor P$。
\item
（結合法則）任意の命題$P$, $Q$, $R$に対して、$P \land (Q \lor R) = (P \land Q) \lor (P \land R)$, $P \lor (Q \land R) = (P \lor Q) \land (P \lor R)$。
\item
（二重否定）任意の命題$P$に対して、$\neg (\neg P) = P$。
\item
（ド・モルガンの法則）任意の命題$P$, $Q$に対して、$\neg (P \land Q) = \neg P \lor \neg Q$, $\neg (P \lor Q) = \neg P \land \neg Q$。
\item
（背理法の原理）任意の命題$P$, $Q$に対して、$\neg (P \implies Q) = P \land \neg Q$。
\item
（対偶）任意の命題$P$, $Q$に対して、$P \implies Q = \neg Q \implies \neg P$。
\item
任意の命題$P(x)$に対して、$\neg (\forall x \in X, P(x)) = \exists x \in X, \neg P(x)$。
\item
任意の命題$P(x)$に対して、$\neg (\exists x \in X, P(x)) = \forall x \in X, \neg P(x)$。
\end{enumerate}

背理法の原理にもとづいて命題$P \implies Q$が真であることを示すために$P \land \neg Q$が偽であることつまり$P$と$\neg Q$を仮定して矛盾を導くことを示す証明法を\emph{背理法}という。
また、命題$P \implies Q$が真であることを示すために\emph{対偶}$\neg Q \implies \neg P$が真であることを示す証明法を\emph{対偶論法}という。

\section{集合の演算}

集合と集合の関係で重要なものとして以下の\emph{包含}がある。

\begin{definition}[集合の包含]
$A$, $B$を集合とする。
\begin{itemize}
\item
任意の$x \in A$が$x \in B$となっている時、集合$A$は集合$B$に\emph{含まれる}あるいは集合$A$は集合$B$の\emph{部分集合}であるといい、$A \subset B$あるいは$B \supset A$と表す。
\item
$A \subset B$かつ$A \supset B$のとき、集合$A$と集合$B$は\emph{等しい}といい、$A = B$と表す。
\end{itemize}
\end{definition}

集合と集合から以下の集合を定義する。

\begin{definition}[集合の演算]
$X$を集合として、$A$, $B$をその部分集合とする。
\begin{itemize}
\item
集合$\lrset{ x \in X \mid x \in A \land x \in B }$を$A$と$B$の\emph{共通部分}といい$A\cap B$と表す。
\item
集合$\lrset{ x \in X \mid x \in A \lor x \in B }$を$A$と$B$の\emph{和集合}といい$A\cup B$と表す。
\item
集合$\lrset{ x \in X \mid x \in A \land x \notin B }$を$A$と$B$の\emph{差集合}といい$A\setminus B$と表す。
\item
特に集合$\lrset{ x \in X \mid x \notin A } = X\setminus A$を$A$の\emph{補集合}といい$A^c$と表す。
また、この時の$X$を\emph{全体集合}と表現することがある。
\end{itemize}
\end{definition}

命題の演算の性質に対応して集合の演算には次の性質がある。
\begin{enumerate}
\item
（結合法則）任意の集合$A$, $B$, $C$に対して、$(A\cap B)\cap C = A\cap (B\cap C)$, $(A\cup B)\cup C = A\cup (B\cup C)$
\item
（交換法則）任意の集合$A$, $B$に対して、$A\cap B = B\cap A$, $A\cup B = B\cup A$。
\item
（結合法則）任意の集合$A$, $B$, $C$に対して、$A\cap(B\cup C) = (A\cap B)\cup(A\cap C)$, $A\cup(B\cap C) = (A\cup B)\cap(A\cup C)$。
\item
任意の集合$A$に対して、$(A^c)^c = A$。
\item
（ド・モルガンの法則）任意の集合$A$, $B$に対して、$(A\cap B)^c = A^c\cup B^c$, $(A\cup B)^c = A^c\cap B^c$。
\end{enumerate}

\section{写像の像と逆像}

写像は集合の元を別の集合の元に対応させるものであるが、そこから発展させて部分集合を対応させることを考えることが今後必要になってくる。

\begin{definition}[写像の像と逆像]
$F$を集合$X$から集合$Y$への写像として、$A$を$X$の部分集合、$B$を$Y$の部分集合とする。
\begin{itemize}
\item
集合$\lrset{ F(x) \mid x \in A }$は$Y$の部分集合であり$A$の$F$による\emph{像}といい$F(A)$と表す。
\item
集合$\lrset{ x \in X \mid F(x) \in B }$は$X$の部分集合であり$B$の$F$による\emph{逆像}といい$F^{-1}(A)$と表す。
\end{itemize}
\end{definition}

\begin{example}
$f(x) = x^2$を考えると、$f(\lrset{0, 1}) = \lrset{0, 1}$, $f(\lrset{0, 1, -1}) = \lrset{0, 1}$。
また、$f^{-1}(\lrset{0, 1}) = \lrset{0, 1, -1}$, $f^{-1}(\lrset{-1}) = \emptyset$。
\end{example}

写像の像と逆像については以下の成立が成り立つ。
$F$は集合$X$から集合$Y$への写像である。
\begin{enumerate}
\item
任意の$X$の部分集合$A_1, A_2$に対して、$A_1 \subset A_2$ならば$F(A_1) \subset F(A_2)$。
\item
任意の$Y$の部分集合$B_1, B_2$に対して、$B_1 \subset B_2$ならば$F^{-1}(B_1) \subset F^{-1}(B_2)$。
\item
任意の$X$の部分集合$A_1, A_2$に対して、$F(A_1\cap A_2) \subset F(A_1)\cap F(A_2)$。
\item
任意の$X$の部分集合$A_1, A_2$に対して、$F(A_1\cup A_2) = F(A_1)\cup F(A_2)$。
\item
任意の$Y$の部分集合$B_1, B_2$に対して、$F^{-1}(B_1\cap B_2) = F(B_1)\cap F(B_2)$。
\item
任意の$Y$の部分集合$B_1, B_2$に対して、$F^{-1}(B_1\cup B_2) = F(B_1)\cup F(B_2)$。
\item
任意の$X$の部分集合$A$に対して、$F^{-1}(F(A)) \supset A$。
\item
任意の$Y$の部分集合$B$に対して、$F(F^{-1}(B)) \subset B$。
\end{enumerate}

\section{逆写像}

写像には可逆と呼ばれる特殊な扱いのできるものがある。

\begin{definition}[逆写像]
$F$を集合$X$から集合$Y$への写像とする。
集合$Y$から集合$X$への写像$G$であって、任意の$x \in X$に対して$G(F(x)) = x$が、任意の$y \in Y$に対して$F(G(y)) = y$が成り立つとき、$F$は\emph{可逆}であるといい$G$は$F$の\emph{逆写像}という。
また、逆写像$G$を$F^{-1}$と表す。
\end{definition}

つまり、$F^{-1}(F(x)) = x$, $F(F^{-1}(y)) = y$である。
逆写像は存在すれば一つしかない。
逆像も逆写像も同じ記号$F^{-1}$を用いるがそれぞれ集合の元と部分集合を当てはめて対象が違う概念である。
とはいえ可逆つまり逆写像がある写像に対しては$F^{-1}(\lrset{y}) = \lrset{F^{-1}(y)}$という関係式が成り立つ。
ここで、左辺の$F^{-1}$は逆像であり右辺の$F^{-1}$は逆写像として用いられている。

可逆は全単射とも呼ばれ、次の特徴づけがある。

\begin{proposition}
集合$X$から集合$Y$への写像$F$が可逆であることは次の二つの条件が成り立つことと同値である。
\begin{enumerate}
\item
（全射性）$F(X) = Y$である。
\item
（単射性）任意の$y \in Y$に対して$F(x) = y$となる$x \in X$は一意である。
すなわち$x_1, x_2 \in X$が$F(x_1) = F(x_2)$を満たすならば$x_1 = x_2$が成り立つ。
\end{enumerate}
\end{proposition}

\begin{proof}
$F$が可逆の時、逆写像$F^{-1}$が存在する。
全射性を示すために$y \in Y$を取ると$x = F^{-1}(y)$とすることで$F(x) = F(F^{-1}(y)) = y$。
よって$F(X) \supset Y$なので、$F(X) = Y$である。
単射性を示すために$F(x_1) = F(x_2)$を満たす$x_1, x_2 \in X$を取ると$x_1 = F^{-1}(F(x_1)) = F^{-1}(F(x_2)) = x_2$である。
以上より全射性と単射性が示された。

逆に$F$が全射性と単射性を満たす時、$y \in Y$に対して$F(x) = y$となる$x$が一意に存在するのでそれを$G(y)$とおいて$Y$から$X$への写像$G$を定める。
この時、$F(G(y)) = y$であり$G(F(x)) = G(y) = x$なので、$G$は$F$の逆写像となっている。
\end{proof}
